<template name="category">
    <div class="wrapper">
        <ol class="breadcrumb">
            {{load_children}}
            {{#each get_parent_url}}
                <li class="">
                    <a class="" href="{{pathFor 'category'}}/{{_id}}"> {{name}} </a>
                </li>
            {{/each}}
            {{#if get_children}}
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                    <ul class="dropdown-menu scrollable-menu" role="menu">
                        {{#each get_children}}
                            <li><a href="{{pathFor 'category'}}/{{_id}}">{{name}}</a></li>
                        {{/each}}
                    </ul>
                </div>
            {{/if}}
        </ol>

        <table class="table">
            <tr>
                <td><h2>{{data.name}}</h2></td>
            </tr>
            <tr>
                <td><p>{{data.description}}</p></td>
            </tr>
        </table>
        <table class="table">
            <tr>
                <th><h3>{{_ "mainContent.title"}}</h3></th>
                <th><h3>{{_ "mainContent.description"}}</h3></th>
                <th><h3>{{_ "mainContent.created"}}</h3></th>
                <th><h3>{{_ "mainContent.date"}}</h3></th>
                <th><h3>{{_ "mainContent.rating"}}</h3></th>
            </tr>
            {{#each get_content}}
                <tr class="contentRow">
                    <td>
                        <a href="{{pathFor 'show_content' _id=_id}}">
                            {{title}}
                        </a>
                    </td>
                    <td>
                        {{description}}
                    </td>
                    <td>
                        {{createdBy}}
                    </td>
                    <td>
                        {{timeSince time}} 
                    </td>
                    <td>
                        Rating
                    </td>
                </tr>
            {{/each}}
        </table>

        {{#if currentUser}}
        <a href="{{pathFor 'create_content'}}/{{data._id}}" style="font-family: FontAwesome" class="btn btn-default">
            &#xf067; {{_ "mainContent.create_content"}}
        </a>
        {{/if}}

        {{#if get_children}}
        <table style="margin-top: 25px" class="table">
            <tr><th>Subcategories</th><th></th></tr>
            {{#each get_children}}
                <tr>
                    <td>
                        <a href="{{pathFor 'category'}}/{{_id}}">{{name}}</a>
                    </td>
                    <td></td>
                </tr>
            {{/each}}
        </table>
        {{/if}}

        {{#if currentUser}}
        <button id="subCatButton" style="font-family: FontAwesome;">&#xf150; Create Subcategory</button>
        <form id="new_subcategory" style="display: none">
            <table>
                <tr>
                    <th>Ny sub kategori</th>
                    <th></th>
                </tr>
                <tr>
                    <td>Navn:</td>
                    <td><input type="text" id="name"/></td>
                </tr>
                <tr>
                    <td>Beskrivelse:</td>
                    <td><input type="text" id="description"/></td>
                </tr>
                <tr>
                    <!-- make it be able to search language like createContent -->
                    <td>Language:</td>
                    <td>{{> inputAutocomplete settings=settingsLang id="autocomplete-input-Lang" class="form-control" placeholder=(_ 'typeHere.TypeHere') autofocus="autofocus"}}</td>
                    <td><input type="text" id="language"/></td>
                </tr>
                <tr>
                    <input type="submit" id="newSubCat" style="font-family: FontAwesome" value="&#xf067; Add Subcategory" />
                </tr>
            </table>
        </form>
        {{/if}}
    </div>
</template>

<!-- For language search -->
<template name="serverCollectionPillCategory" id="{{_id}}">
  {{name}}
</template>

<template name="clientCollectionPillCategory" id="{{_id}}">
  {{name}}
</template>

<template name="serverNoMatchCategory">
    <span class="text-danger">Nothing found on the server for <b>{{getFilter}}</b>!</span>
</template>
<!-- End of language search -->