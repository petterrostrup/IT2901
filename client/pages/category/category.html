<template name="category" xmlns="http://www.w3.org/1999/html">
    <div class="wrapper">
        <ol class="breadcrumb">
            {{load_children}}
            {{#each get_parent_url}}
                <li class="">
                    <a class="" href="{{pathFor 'category'}}/{{_id}}"> {{name}} </a>
                </li>
            {{/each}}
            {{#if get_children}}
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                    <ul class="dropdown-menu scrollable-menu" role="menu">
                        {{#each get_children}}
                            <li><a href="{{pathFor 'category'}}/{{_id}}">{{name}}</a></li>
                        {{/each}}
                    </ul>
                </div>
            {{/if}}
        </ol>

    <!--     {{#with data}}
        <table class="table">
            <tr>
                <td><h2>{{name}}</h2></td>
            </tr>
            <tr>
                <td><p>{{description}}</p></td>
            </tr>
        </table>
        {{/with}} -->

        <!-- {{#if currentUser}}
        <a href="{{pathFor 'create_content'}}/{{data._id}}" style="font-family: FontAwesome" class="btn btn-default">
            &#xf067; {{_ "mainContent.create_content"}}
        </a>
        {{/if}} -->

        {{#if currentUser}}
        <div class="alert alert-danger" id="logError" style="display: none;">
            <div id="logErrorText"></div>
        </div>
        <div style="display: inline-block" class="col-lg-12">
            <div  class="pull-right" style="display: inline-block;">
                <a href="{{pathFor 'create_content'}}/{{_id}}" style="font-family: FontAwesome" class="btn btn-default">
                    &#xf067; {{_ "mainContent.create_content"}}
                </a>
                <!-- TODO -->
                <button id="transbtn" class="btn btn-default" style="font-family: FontAwesome;">&#xf150; {{_ "category.translate"}}</button>
                <form id="translate_category" style="display: none">
                    <table>
                        <tr>
                            <th>{{_ "category.translate"}}</th>
                            <th></th>
                        </tr>
                        <tr>
                            <td>{{_ "category.name"}}:</td>
                            <td><input type="text" id="name_trans"/></td>
                        </tr>
                        <tr>
                            <td>{{_ "category.description"}}:</td>
                            <td><input type="text" id="desc_trans"/></td>
                        </tr>
                        <tr>
                            <!-- make it be able to search language like createContent -->
                            <td>{{_ "category.language"}}:</td>
                            <td>{{> inputAutocomplete autocomplete="off" settings=settingsLang id="autocomplete-input-Lang-trans" class="form-control" placeholder=(_ 'typeHere.TypeHere') autofocus="autofocus"}}</td>
                        </tr>
                        <tr>
                            <input type="submit" class="btn btn-default" id="newSubCat" style="font-family: FontAwesome" value="&#xf067; {{_ 'category.translate'}}" />
                        </tr>
                    </table>
                </form>

                <button id="subCatButton" class="btn btn-default" style="font-family: FontAwesome;">&#xf150; {{_ "category.new_sub"}}</button>
                <form id="new_subcategory" style="display: none">
                    <table>
                        <tr>
                            <th>{{_ "category.new_sub_text"}}</th>
                            <th></th>
                        </tr>
                        <tr>
                            <td>{{_ "category.name"}}:</td>
                            <td><input type="text" id="name"/></td>
                        </tr>
                        <tr>
                            <td>{{_ "category.description"}}:</td>
                            <td><input type="text" id="description"/></td>
                        </tr>
                        <tr>
                            <!-- make it be able to search language like createContent -->
                            <td>{{_ "category.language"}}:</td>
                            <td>{{> inputAutocomplete autocomplete="off" settings=settingsLang id="autocomplete-input-Lang" class="form-control" placeholder=(_ 'typeHere.TypeHere') autofocus="autofocus"}}</td>
                        </tr>
                        <tr>
                            <input type="submit" class="btn btn-default" id="newSubCat" style="font-family: FontAwesome" value="&#xf067; {{_ 'category.new_sub'}}" />
                        </tr>
                    </table>
                </form>
            </div>
        </div>
        {{/if}}

        <div class="sidebar nav navbar" >
            <table style="margin-top: 25px" class="table">
                <tr><th>Subcategories</th><th></th></tr>
                {{#each get_children}}
                <tr>
                    <td>
                        <a href="{{pathFor 'category'}}/{{_id}}">{{name}}</a>
                    </td>
                    <td></td>
                </tr>
                {{/each}}
            </table>
        </div>

        {{#with load_category}}
        <table style="float: left; display: inline-block">
            <tr>
                <td><h2>{{name}}</h2></td>
            </tr>
            <tr>
                <td><p>{{description}}</p></td>
            </tr>
        </table>
        {{/with}}
        <table class="table table-striped table-hover" style="margin-top: 10%">
            <thead>
            <tr>
                <th class="tableHeader">{{_ "mainContent.title"}}</th>
                <th class="tableHeader">{{_ "mainContent.description"}}</th>
                <th class="tableHeader">{{_ "mainContent.created"}}</th>
                <th class="tableHeader">{{_ "mainContent.date"}}</th>
                <th class="tableHeader">{{_ "mainContent.rating"}}</th>
            </tr>
            </thead>
            <tbody>
            {{#each get_content}}
                <tr class="clickAble {{_id}}">
                    <td>
                        <!-- <a href="{{pathFor 'show_content' _id=_id}}">{{title}} </a> -->
                        {{title}}
                    </td>
                    <td>{{description}}</td>
                    <td>{{createdBy}}
                    </td>
                    <td>
                        {{timeSince time}}
                    </td>
                    <td>
                        {{rating}}
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
        {{#if get_children}}
        <table style="margin-top: 25px" class="table">
            <tr><th>Subcategories</th><th></th></tr>
            {{#each get_children}}
                <tr>
                    <td>
                        <a href="{{pathFor 'category'}}/{{_id}}">{{name}}</a>
                    </td>
                    <td></td>
                </tr>
            {{/each}}
        </table>
        {{/if}}
    </div>
</template>

<!-- For language search -->
<template name="serverCollectionPillCategory" id="{{_id}}">
  {{name}}
</template>

<template name="clientCollectionPillCategory" id="{{_id}}">
  {{name}}
</template>

<template name="serverNoMatchCategory">
    <span class="text-danger">Nothing found on the server for <b>{{getFilter}}</b>!</span>
</template>
<!-- End of language search -->
